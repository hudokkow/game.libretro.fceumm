From d2f6291c1f6b53cf0f9098884d07701b2ec41987 Mon Sep 17 00:00:00 2001
From: Garrett Brown <themagnificentmrb@gmail.com>
Date: Sat, 22 Aug 2015 19:24:30 -0700
Subject: [PATCH] Fix linker option error on OSX

Error was: "ld: unknown option: -no-undefined"
---
 Makefile.libretro-fceux | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

diff --git a/Makefile.libretro-fceux b/Makefile.libretro-fceux
index 880ca7e..eccbc6a 100644
--- a/Makefile.libretro-fceux
+++ b/Makefile.libretro-fceux
@@ -94,7 +94,12 @@ FCEU_DEFINES := -D__LIBRETRO__ -DSOUND_QUALITY=0 -DPATH_MAX=1024 -DINLINE=inline
 
 CFLAGS += -std=gnu99 $(fpic) -Wno-write-strings $(FCEU_DEFINES)
 CXXFLAGS += $(fpic) -Wno-write-strings $(FCEU_DEFINES)
-LDFLAGS += -Wl,-no-undefined
+
+ifeq ($(platform), osx)
+	LDFLAGS += -Wl,-undefined,error
+else
+	LDFLAGS += -Wl,-no-undefined
+endif
 
 INCDIRS := -I$(FCEU_DIR)
 
@@ -124,4 +129,3 @@ clean:
 	rm -f $(TARGET)
 
 .PHONY: clean
-
-- 
1.9.5 (Apple Git-50.3)

